<mat-toolbar class="main-toolbar">
  <div class="toolbar-content">
    <a mat-button routerLink="/" class="brand">
      <mat-icon>local_movies</mat-icon>
      CinemaApp
    </a>

    <div class="nav-links">
      <a mat-button routerLink="movies/filter" class="nav-button">
        <mat-icon>search</mat-icon>
        Search
      </a>
    </div>

    <!-- Admin Links -->
    <app-authorized rol="admin">
      <ng-container authorized>
        <div class="admin-links">
          <a mat-button routerLink="genres" class="nav-button">
            <mat-icon>category</mat-icon>
            Genres
          </a>
          <a mat-button routerLink="actors" class="nav-button">
            <mat-icon>people</mat-icon>
            Actors
          </a>
          <a mat-button routerLink="cinemas" class="nav-button">
            <mat-icon>business</mat-icon>
            Cinemas
          </a>
          <a mat-button routerLink="users" class="nav-button">
            <mat-icon>admin_panel_settings</mat-icon>
            Users
          </a>
        </div>
      </ng-container>
    </app-authorized>

    <!-- Mobile Menu Toggle -->
    <button
      mat-icon-button
      class="mobile-menu-toggle"
      (click)="toggleMobileMenu()"
    >
      <mat-icon>menu</mat-icon>
    </button>

    <!-- Auth Section -->
    <div class="auth-section">
      <app-authorized>
        <div authorized class="auth-logged-in">
          <div class="user-greeting">
            <div class="user-avatar">
              {{ getUserInitials() }}
            </div>
            <span class="user-email">{{
              securityService.obtainFieldJWT("email")
            }}</span>
          </div>
          <a
            mat-button
            routerLink="/"
            (click)="securityService.logout()"
            class="nav-button logout-btn"
          >
            <mat-icon>logout</mat-icon>
            Logout
          </a>
        </div>
        <div notAuthorized class="auth-logged-out">
          <a mat-button routerLink="login" class="nav-button login-btn">
            <mat-icon>login</mat-icon>
            Sign In
          </a>
          <a mat-button routerLink="register" class="nav-button register-btn">
            <mat-icon>person_add</mat-icon>
            Sign Up
          </a>
        </div>
      </app-authorized>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu section-divider" [class.active]="isMobileMenuOpen">
    <div class="mobile-nav-links">
      <a
        mat-button
        routerLink="movies/filter"
        class="mobile-nav-button"
        (click)="closeMobileMenu()"
      >
        <mat-icon>search</mat-icon>
        Search
      </a>

      <app-authorized rol="admin">
        <ng-container authorized>
          <a
            mat-button
            routerLink="genres"
            class="mobile-nav-button"
            (click)="closeMobileMenu()"
          >
            <mat-icon>category</mat-icon>
            Genres
          </a>
          <a
            mat-button
            routerLink="actors"
            class="mobile-nav-button"
            (click)="closeMobileMenu()"
          >
            <mat-icon>people</mat-icon>
            Actors
          </a>
          <a
            mat-button
            routerLink="cinemas"
            class="mobile-nav-button"
            (click)="closeMobileMenu()"
          >
            <mat-icon>business</mat-icon>
            Cinemas
          </a>
          <a
            mat-button
            routerLink="users"
            class="mobile-nav-button"
            (click)="closeMobileMenu()"
          >
            <mat-icon>admin_panel_settings</mat-icon>
            Users
          </a>
        </ng-container>
      </app-authorized>
    </div>
  </div>
</mat-toolbar>
